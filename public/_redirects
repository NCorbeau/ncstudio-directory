# Allow CSS files to pass through (must come first!)
/_astro/*.css /_astro/:splat 200!
/styles/global.css /styles/global.css 200!
/styles/themes/*.css /styles/themes/:splat 200!

# Directory paths for the Cloudflare Pages domain
/dog-parks-warsaw/* /dog-parks-warsaw/:splat 200
/french-desserts/* /french-desserts/:splat 200

# Redirect domain aliases to primary domains (www to non-www)
https://www.frenchdesserts-guide.com/* https://frenchdesserts-guide.com/:splat 301!
https://www.dogparkswarsaw.com/* https://dogparkswarsaw.com/:splat 301!

# Custom domain routing to respective directories
/* /french-desserts/:splat 200  Host=frenchdesserts-guide.com
/* /dog-parks-warsaw/:splat 200  Host=dogparkswarsaw.com

# API endpoints need to be handled specially to maintain functionality
/api/search /api/search 200
/api/webhook /api/webhook 200

# Handle 404s for each directory by routing to the directory's 404 page
/french-desserts/* /french-desserts/404/index.html 404
/dog-parks-warsaw/* /dog-parks-warsaw/404/index.html 404

# Default redirects for the main domain
/ /directory-selector/ 200

# Must be last!
/* /404.html 404